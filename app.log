> Task :checkKotlinGradlePluginConfigurationErrors
> Task :processResources UP-TO-DATE
> Task :compileKotlin
> Task :compileJava NO-SOURCE
> Task :classes UP-TO-DATE
> Task :resolveMainClassName

> Task :bootRun

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.4)

2025-08-05T22:09:23.193+08:00  INFO 17971 --- [rag.demo] [  restartedMain] com.enzo.rag.demo.ApplicationKt          : Starting ApplicationKt using Java 21.0.8 with PID 17971 (/Users/xiechengru/Downloads/rag.demo/build/classes/kotlin/main started by xiechengru in /Users/xiechengru/Downloads/rag.demo)
2025-08-05T22:09:23.194+08:00  INFO 17971 --- [rag.demo] [  restartedMain] com.enzo.rag.demo.ApplicationKt          : No active profile set, falling back to 1 default profile: "default"
2025-08-05T22:09:23.218+08:00  INFO 17971 --- [rag.demo] [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-08-05T22:09:23.218+08:00  INFO 17971 --- [rag.demo] [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-08-05T22:09:23.649+08:00  INFO 17971 --- [rag.demo] [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8081 (http)
2025-08-05T22:09:23.658+08:00  INFO 17971 --- [rag.demo] [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-05T22:09:23.658+08:00  INFO 17971 --- [rag.demo] [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2025-08-05T22:09:23.675+08:00  INFO 17971 --- [rag.demo] [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-05T22:09:23.675+08:00  INFO 17971 --- [rag.demo] [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 457 ms
2025-08-05T22:09:24.009+08:00  INFO 17971 --- [rag.demo] [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-08-05T22:09:24.025+08:00  INFO 17971 --- [rag.demo] [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8081 (http) with context path '/'
2025-08-05T22:09:24.030+08:00  INFO 17971 --- [rag.demo] [  restartedMain] com.enzo.rag.demo.ApplicationKt          : Started ApplicationKt in 1.032 seconds (process running for 1.229)
2025-08-05T22:09:33.991+08:00  INFO 17971 --- [rag.demo] [nio-8081-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-05T22:09:33.991+08:00  INFO 17971 --- [rag.demo] [nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-08-05T22:09:33.991+08:00  INFO 17971 --- [rag.demo] [nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
⚡ 收到快速查詢請求: 推荐好看的武侠小说
🧠 智能Fallback：語義向量 + 關鍵詞混合分析...
2025-08-05T22:09:40.868+08:00 ERROR 17971 --- [rag.demo] [nio-8081-exec-2] i.n.r.d.DnsServerAddressStreamProviders  : Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
📊 語義相似度分析: [小說=0.369, 武俠=0.473, 奇幻=0.314, 科幻=0.214, 愛情=0.237, 懸疑=0.268, 歷史=0.261, 心理學=0.231, 哲學=0.235, 管理=0.157, 程式設計=0.171]
🎯 語義匹配標籤: [武俠, 小說, 奇幻]
🔍 關鍵詞匹配標籤: []
✨ 最終混合標籤: [武俠, 小說, 奇幻]
🎯 Fallback解析結果: language=中文, tags=[武俠, 小說, 奇幻]
🔍 開始推薦查詢: 推荐好看的武侠小说
🏷️ Gemini提取標籤: [武俠, 小說, 奇幻]
🏷️ 步驟 1: Tags向量搜索...
   Tags查詢: 分類：武俠、小說、奇幻
✅ Tags搜尋找到 50 本候選書籍
📖 步驟 2: Description向量重排序...
   Description查詢: 推荐好看的武侠小说
✅ Description重排序完成，批量處理 20 本書籍
🏷️ 步驟 3: 快速Tag語義比對...
⚡ 智能Tag語義比對，Gemini標籤: [武俠, 小說, 奇幻]
✅ 智能Tag比對完成，語義計算: 5 次（最大5次）
📊 步驟 4: 綜合評分排序...
🎯 步驟 5: 構建5個候選結果...
⚡ 步驟 6: 跳過Flash重排序（快速模式）
📊 混合评分的最终结果：
   1. 📖 解憂雜貨店 - 最终分數: 0.534
   2. 📖 解憂雜貨店 - 最终分數: 0.534
   3. 📖 冰與火之歌：權力遊戲 - 最终分數: 0.517
   4. 📖 哈利波特：神秘的魔法石 - 最终分數: 0.503
   5. 📖 魔戒：魔戒現身 - 最终分數: 0.502
🎉 推薦完成，耗時 309ms，返回 5 本書籍
🗣️ 收到自然語言查詢: 我想找適合青少年閱讀的書
🧠 開始分析自然語言查詢: 我想找適合青少年閱讀的書
⚠️ Gemini 解析失敗，使用回退策略: java.util.concurrent.TimeoutException: Did not observe any item or terminal signal within 3000ms in 'flatMap' (and no fallback has been configured)
🧠 智能Fallback：語義向量 + 關鍵詞混合分析...
📊 語義相似度分析: [小說=0.384, 武俠=0.316, 奇幻=0.352, 科幻=0.293, 愛情=0.311, 懸疑=0.349, 歷史=0.276, 心理學=0.350, 哲學=0.387, 管理=0.237, 程式設計=0.201]
🎯 語義匹配標籤: [哲學, 小說, 奇幻]
🔍 關鍵詞匹配標籤: []
✨ 最終混合標籤: [哲學, 小說, 奇幻]
⚠️ Gemini解析耗時過長(3110ms)，但已完成
📋 Flash 解析結果: language=中文, tags=[哲學, 小說, 奇幻]
🔍 開始推薦查詢: 我想找適合青少年閱讀的書
🏷️ Gemini提取標籤: [哲學, 小說, 奇幻]
🏷️ 步驟 1: Tags向量搜索...
   Tags查詢: 分類：哲學、小說、奇幻
✅ Tags搜尋找到 50 本候選書籍
📖 步驟 2: Description向量重排序...
   Description查詢: 我想找適合青少年閱讀的書
✅ Description重排序完成，批量處理 20 本書籍
🏷️ 步驟 3: 快速Tag語義比對...
⚡ 智能Tag語義比對，Gemini標籤: [哲學, 小說, 奇幻]
✅ 智能Tag比對完成，語義計算: 5 次（最大5次）
📊 步驟 4: 綜合評分排序...
🎯 步驟 5: 構建5個候選結果...
⚡ 步驟 6: 跳過Flash重排序（快速模式）
📊 混合评分的最终结果：
   1. 📖 牧羊少年奇幻之旅 - 最终分數: 0.670
   2. 📖 看不見的城市 - 最终分數: 0.631
   3. 📖 你想活出怎樣的人生？ - 最终分數: 0.587
   4. 📖 解憂雜貨店 - 最终分數: 0.580
   5. 📖 解憂雜貨店 - 最终分數: 0.580
🎉 推薦完成，耗時 220ms，返回 5 本書籍
