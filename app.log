> Task :checkKotlinGradlePluginConfigurationErrors
> Task :compileKotlin UP-TO-DATE
> Task :compileJava NO-SOURCE
> Task :processResources UP-TO-DATE
> Task :classes UP-TO-DATE
> Task :resolveMainClassName UP-TO-DATE

> Task :bootRun

  .   ____          _            __ _ _
 /\\ / ___'_ __ _ _(_)_ __  __ _ \ \ \ \
( ( )\___ | '_ | '_| | '_ \/ _` | \ \ \ \
 \\/  ___)| |_)| | | | | || (_| |  ) ) ) )
  '  |____| .__|_| |_|_| |_\__, | / / / /
 =========|_|==============|___/=/_/_/_/

 :: Spring Boot ::                (v3.5.4)

2025-08-04T22:40:01.932+08:00  INFO 82099 --- [rag.demo] [  restartedMain] com.enzo.rag.demo.ApplicationKt          : Starting ApplicationKt using Java 21.0.8 with PID 82099 (/Users/xiechengru/Downloads/rag.demo/build/classes/kotlin/main started by xiechengru in /Users/xiechengru/Downloads/rag.demo)
2025-08-04T22:40:01.934+08:00  INFO 82099 --- [rag.demo] [  restartedMain] com.enzo.rag.demo.ApplicationKt          : No active profile set, falling back to 1 default profile: "default"
2025-08-04T22:40:01.961+08:00  INFO 82099 --- [rag.demo] [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-08-04T22:40:01.961+08:00  INFO 82099 --- [rag.demo] [  restartedMain] .e.DevToolsPropertyDefaultsPostProcessor : For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-08-04T22:40:02.457+08:00  INFO 82099 --- [rag.demo] [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8081 (http)
2025-08-04T22:40:02.467+08:00  INFO 82099 --- [rag.demo] [  restartedMain] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2025-08-04T22:40:02.467+08:00  INFO 82099 --- [rag.demo] [  restartedMain] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2025-08-04T22:40:02.487+08:00  INFO 82099 --- [rag.demo] [  restartedMain] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2025-08-04T22:40:02.488+08:00  INFO 82099 --- [rag.demo] [  restartedMain] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 526 ms
2025-08-04T22:40:02.804+08:00 ERROR 82099 --- [rag.demo] [  restartedMain] i.n.r.d.DnsServerAddressStreamProviders  : Unable to load io.netty.resolver.dns.macos.MacOSDnsServerAddressStreamProvider, fallback to system defaults. This may result in incorrect DNS resolutions on MacOS. Check whether you have a dependency on 'io.netty:netty-resolver-dns-native-macos'. Use DEBUG level to see the full stack: java.lang.UnsatisfiedLinkError: failed to load the required native library
✅ Qdrant 集合 'books' 已存在
🔄 應用啟動時重建內存書籍數據...
✅ 總共獲取 0 條向量數據
📝 Qdrant中暫無數據，等待首次導入
2025-08-04T22:40:03.176+08:00  INFO 82099 --- [rag.demo] [  restartedMain] o.s.b.d.a.OptionalLiveReloadServer       : LiveReload server is running on port 35729
2025-08-04T22:40:03.188+08:00  INFO 82099 --- [rag.demo] [  restartedMain] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8081 (http) with context path '/'
2025-08-04T22:40:03.193+08:00  INFO 82099 --- [rag.demo] [  restartedMain] com.enzo.rag.demo.ApplicationKt          : Started ApplicationKt in 1.482 seconds (process running for 1.687)
2025-08-04T22:40:09.745+08:00  INFO 82099 --- [rag.demo] [nio-8081-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-08-04T22:40:09.745+08:00  INFO 82099 --- [rag.demo] [nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2025-08-04T22:40:09.745+08:00  INFO 82099 --- [rag.demo] [nio-8081-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
🗣️ 收到自然語言查詢: 想看一些戰爭史詩奇幻小說
🧠 開始分析自然語言查詢: 想看一些戰爭史詩奇幻小說
📊 Gemini Flash Token 使用: 487 prompt + 116 response = 603 total
📝 Gemini 解析結果: {
  "query_text": "想看一些戰爭史詩奇幻小說",
  "filters": {
    "language": "中文",
    "tags": ["戰爭", "史詩", "奇幻", "小說"]
  },
  "summary": "您想尋找融合戰爭史詩與奇幻元素的小說，真是個充滿想像力的選擇！我會盡力為您推薦一些精彩的作品，帶您進入波瀾壯闊的奇幻世界！⚔️📖"
}
📋 Flash 解析結果: language=中文, tags=[戰爭, 史詩, 奇幻, 小說]
🔍 開始推薦查詢: 想看一些戰爭史詩奇幻小說
📋 過濾條件: language=中文, tags=[戰爭, 史詩, 奇幻, 小說]
📊 步驟 1: 生成查詢向量...
🏷️ 步驟 2: 第一階段 Tags 向量搜尋...
✅ 過濾搜尋成功，找到 50 個結果
✅ 第一階段找到 50 本候選書籍
📝 步驟 3: 第二階段 Description 向量重排序...
📊 重排序完成：
   📖 冰與火之歌：權力遊戲 - 綜合分數: 0.790 (Tags: 0.759, Desc: 0.803)
   📖 1984 - 綜合分數: 0.772 (Tags: 0.703, Desc: 0.802)
   📖 1984 - 綜合分數: 0.772 (Tags: 0.703, Desc: 0.802)
   📖 尋找回憶的偵探 - 綜合分數: 0.767 (Tags: 0.755, Desc: 0.773)
   📖 沙丘 - 綜合分數: 0.764 (Tags: 0.753, Desc: 0.769)
🎯 步驟 4: 構建最終推薦結果...
🎉 推薦完成，耗時 186ms，返回 5 本書籍
🗣️ 收到自然語言查詢: 中世紀魔幻戰爭故事
🧠 開始分析自然語言查詢: 中世紀魔幻戰爭故事
📊 Gemini Flash Token 使用: 484 prompt + 115 response = 599 total
📝 Gemini 解析結果: {
  "query_text": "中世紀魔幻戰爭故事",
  "filters": {
    "language": "中文",
    "tags": ["小說", "奇幻", "戰爭", "中世紀"]
  },
  "summary": "您想尋找以中世紀為背景，充滿魔幻元素和戰爭場面的精彩故事嗎？我將盡力為您推薦一些扣人心弦的作品，帶您體驗那個時代的奇幻與衝突！⚔️📖"
}
📋 Flash 解析結果: language=中文, tags=[小說, 奇幻, 戰爭, 中世紀]
🔍 開始推薦查詢: 中世紀魔幻戰爭故事
📋 過濾條件: language=中文, tags=[小說, 奇幻, 戰爭, 中世紀]
📊 步驟 1: 生成查詢向量...
🏷️ 步驟 2: 第一階段 Tags 向量搜尋...
✅ 過濾搜尋成功，找到 50 個結果
✅ 第一階段找到 50 本候選書籍
📝 步驟 3: 第二階段 Description 向量重排序...
📊 重排序完成：
   📖 1984 - 綜合分數: 0.595 (Tags: 0.542, Desc: 0.618)
   📖 1984 - 綜合分數: 0.595 (Tags: 0.542, Desc: 0.618)
   📖 被遺忘的歷史：改變世界的50場戰役 - 綜合分數: 0.595 (Tags: 0.598, Desc: 0.593)
   📖 辛德勒的名單 - 綜合分數: 0.589 (Tags: 0.538, Desc: 0.612)
   📖 三國演義 - 綜合分數: 0.588 (Tags: 0.577, Desc: 0.593)
🎯 步驟 4: 構建最終推薦結果...
🎉 推薦完成，耗時 103ms，返回 5 本書籍
🗣️ 收到自然語言查詢: 戰爭史詩奇幻小說
🧠 開始分析自然語言查詢: 戰爭史詩奇幻小說
📊 Gemini Flash Token 使用: 484 prompt + 104 response = 588 total
📝 Gemini 解析結果: {
  "query_text": "戰爭史詩奇幻小說",
  "filters": {
    "language": "中文",
    "tags": ["小說", "奇幻", "戰爭", "史詩"]
  },
  "summary": "您想尋找融合戰爭史詩元素的奇幻小說，期待帶給您宏大世界觀和精彩故事體驗！我會盡力推薦一些符合您需求的佳作！"
}
📋 Flash 解析結果: language=中文, tags=[小說, 奇幻, 戰爭, 史詩]
🔍 開始推薦查詢: 戰爭史詩奇幻小說
📋 過濾條件: language=中文, tags=[小說, 奇幻, 戰爭, 史詩]
📊 步驟 1: 生成查詢向量...
🏷️ 步驟 2: 第一階段 Tags 向量搜尋...
✅ 過濾搜尋成功，找到 50 個結果
✅ 第一階段找到 50 本候選書籍
📝 步驟 3: 第二階段 Description 向量重排序...
📊 重排序完成：
   📖 冰與火之歌：權力遊戲 - 綜合分數: 0.811 (Tags: 0.773, Desc: 0.827)
   📖 1984 - 綜合分數: 0.790 (Tags: 0.713, Desc: 0.822)
   📖 1984 - 綜合分數: 0.790 (Tags: 0.713, Desc: 0.822)
   📖 沙丘 - 綜合分數: 0.788 (Tags: 0.767, Desc: 0.797)
   📖 尋找回憶的偵探 - 綜合分數: 0.781 (Tags: 0.769, Desc: 0.787)
🎯 步驟 4: 構建最終推薦結果...
🎉 推薦完成，耗時 84ms，返回 5 本書籍
🗣️ 收到自然語言查詢: 我想找一些健康的食譜
🧠 開始分析自然語言查詢: 我想找一些健康的食譜
📊 Gemini Flash Token 使用: 484 prompt + 96 response = 580 total
📝 Gemini 解析結果: {
  "query_text": "我想找一些健康的食譜",
  "filters": {
    "language": "中文",
    "tags": ["健康", "烹飪", "食譜"]
  },
  "summary": "希望我能找到一些美味又健康的食譜，讓您在享受美食的同時也能照顧好身體！祝您食慾佳，身體棒 💪😋"
}
📋 Flash 解析結果: language=中文, tags=[健康, 烹飪, 食譜]
🔍 開始推薦查詢: 我想找一些健康的食譜
📋 過濾條件: language=中文, tags=[健康, 烹飪, 食譜]
📊 步驟 1: 生成查詢向量...
🏷️ 步驟 2: 第一階段 Tags 向量搜尋...
✅ 過濾搜尋成功，找到 33 個結果
✅ 第一階段找到 33 本候選書籍
📝 步驟 3: 第二階段 Description 向量重排序...
📊 重排序完成：
   📖 地中海飲食聖經 - 綜合分數: 0.826 (Tags: 0.820, Desc: 0.828)
   📖 低GI飲食全書 - 綜合分數: 0.821 (Tags: 0.849, Desc: 0.809)
   📖 低GI飲食全書 - 綜合分數: 0.821 (Tags: 0.849, Desc: 0.809)
   📖 斷食的藝術：一份關於限制卡路里與長壽的報告 - 綜合分數: 0.812 (Tags: 0.854, Desc: 0.794)
   📖 一日三餐的健康奇蹟：間歇性斷食全指南 - 綜合分數: 0.807 (Tags: 0.841, Desc: 0.792)
🎯 步驟 4: 構建最終推薦結果...
🎉 推薦完成，耗時 76ms，返回 5 本書籍
